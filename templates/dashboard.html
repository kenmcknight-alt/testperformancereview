{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
  <div>
    <h1 class="h3 mb-1">HR Admin Dashboard</h1>
    <p class="text-muted mb-0">Manage your performance review lifecycle in one place.</p>
  </div>
</div>

<div class="row g-3 mb-4">
  <div class="col-md-3"><div class="metric-card"><p>Total Staff</p><h2>{{ staff_count }}</h2></div></div>
  <div class="col-md-3"><div class="metric-card"><p>Templates</p><h2>{{ template_count }}</h2></div></div>
  <div class="col-md-3"><div class="metric-card"><p>Reviews</p><h2>{{ review_count }}</h2></div></div>
  <div class="col-md-3"><div class="metric-card"><p>Completed</p><h2>{{ completed_count }}</h2></div></div>
</div>

<div class="card modern-card">
  <div class="card-header bg-white"><h2 class="h5 mb-0">Latest Review Activity</h2></div>
  <div class="card-body">
    {% if latest_reviews %}
      <div class="table-responsive">
        <table class="table align-middle">
          <thead><tr><th>Title</th><th>Reviewer</th><th>Reviewee</th><th>Status</th><th></th></tr></thead>
          <tbody>
          {% for review in latest_reviews %}
            <tr>
              <td>{{ review.title }}</td>
              <td>{{ review.reviewer.name }}</td>
              <td>{{ review.reviewee.name }}</td>
              <td><span class="badge text-bg-{{ 'success' if review.status == 'Completed' else 'warning' }}">{{ review.status }}</span></td>
              <td><a class="btn btn-outline-primary btn-sm" href="{{ url_for('view_review', review_id=review.id) }}">View</a></td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">No reviews yet. Start by creating staff and templates.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
